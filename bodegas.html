<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANeKI - Gastroturismo</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Special+Elite&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="./style.css">

    <style>
      .category-card a, .category-card a:hover {
        text-decoration: none;
        color: inherit;
        display: block;
        height: 100%;
      }
    </style>
</head>
<body>
    
    <div id="aside-placeholder"></div>
    
    <div class="mdc-drawer-app-content">
        <div id="header-placeholder"></div>
        <main class="main-app-content">
            <div class="mdc-top-app-bar--fixed-adjust"> 
              <a href="./index.html">
                BODEGAS
              </a>   
            </div>
        </main>
        
        <div id="footer-placeholder"></div>
    </div>
    
<script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <script>
      /**
       * Esta es la función mágica. Carga el contenido de un fichero HTML
       * y lo inyecta en un contenedor de la página.
       * @param {string} file - La ruta al fichero de la plantilla (ej: './PlantillaAside.html').
       * @param {string} elementId - El ID del div contenedor (ej: 'aside-placeholder').
       */
      async function includeHTML(file, elementId) {
        try {
          const response = await fetch(file);
          if (!response.ok) throw new Error("No se encontró el fichero: " + file);
          const text = await response.text();
          document.getElementById(elementId).innerHTML = text;
        } catch (error) {
          console.error("Error al incluir el HTML:", error);
          document.getElementById(elementId).innerHTML = `<p style="color:red;">Error al cargar componente: ${file}</p>`;
        }
      }

      // Se ejecuta cuando la página está lista.
      document.addEventListener('DOMContentLoaded', async function() {
        // 3. Carga todas las plantillas en sus contenedores
        await includeHTML('./aside.html', 'aside-placeholder');
        await includeHTML('./header.html', 'header-placeholder');
        await includeHTML('./footer.html', 'footer-placeholder');

        // 4. Una vez que todo el HTML está cargado, inicializa el JavaScript
        
        // Inicializa los efectos de Material Design
        Array.from(document.querySelectorAll('.mdc-button, .mdc-icon-button, .mdc-list-item, .mdc-card__primary-action')).forEach(el => mdc.ripple.MDCRipple.attachTo(el));
        
        // Controla el menú lateral
        const drawerElement = document.querySelector('.mdc-drawer');
        const menuButton = document.querySelector('.mdc-top-app-bar__navigation-icon');
        if (drawerElement && menuButton) {
          const drawer = mdc.drawer.MDCDrawer.attachTo(drawerElement);
          menuButton.addEventListener('click', () => { drawer.open = !drawer.open; });
        }

        // Añade el año actual al footer
        const yearSpan = document.querySelector('.footer-year');
        if(yearSpan) {
            yearSpan.textContent = new Date().getFullYear();
        }

        // Marca el enlace 'Inicio' como activo
        document.querySelector('a[href*="index.html"]').classList.add('mdc-list-item--activated');
      });
    </script>
</body>
</html>
